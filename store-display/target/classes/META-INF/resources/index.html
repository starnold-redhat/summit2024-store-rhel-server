<!DOCTYPE html>
<html class="pf-v5-theme-dark">

<head>
    <meta charset="UTF-8">
    <title>Quarkus Chat!</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/patternfly/3.2.1/css/patternfly.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/patternfly/3.2.1/css/patternfly-additions.min.css">

    <style>
        
        #chat {
            color: white;
            font-size: 60px;
            text-align: center;
        }
        #nexteventmessage {
            color: white;
            font-size: 60px;
            text-align: center;
        }
        
        
    </style>
</head>

<body bgcolor="black">
   
    <div class="container" id="mainpage">
      <br/>
     
      <div class="row">
          <p></p><p></p>
          <text id="chat">choose a t-shirt, and hold it up in front of the camera</text>
      </div>
      <div class="row" id="nextevent" style="display: none;">
        <p></p>
        <text id="nexteventmessage">Your next event:</text>
        <img id="qrcode"></img>
      </div>  
    </div>
      
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/patternfly/3.24.0/js/patternfly.min.js"></script>

    <script type="text/javascript">
      var connected = false;
      var socket;


      $( document ).ready(function() {
          connect();
      });

      var connect = function() {
          if (! connected) {
              socket = new WebSocket("ws://" + location.host + "/chat/display");
              socket.onopen = function() {
                  connected = true;
                  console.log("Connected to the web socket");
              };
              socket.onmessage =function(m) {
                  console.log("Got message: " + m.data);
                  document.getElementById("chat").innerHTML = m.data;

                  if (m.data.includes('ansible') ){
                     document.getElementById('nextevent').style.display = '';
                     document.getElementById("nexteventmessage").innerHTML = "Your next ansible event:";
                     document.getElementById("qrcode").src = "ansible.png";
                  } else if (m.data.includes('openshift') ){
                     document.getElementById('nextevent').style.display = '';
                     document.getElementById("nexteventmessage").innerHTML = "Your next openshift event:";
                     document.getElementById("qrcode").src = "virt.png";
                  } else if (m.data.includes('kubernetes') ){
                     document.getElementById('nextevent').style.display = '';
                     document.getElementById("nexteventmessage").innerHTML = "Your next rosa event:";
                     document.getElementById("qrcode").src = "rosa.png";
                  }
                  else {
                    document.getElementById('nextevent').style.display = 'none';
                  }
              };
          }
      };


    </script>
</body>

</html>